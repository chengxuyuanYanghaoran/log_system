<!--<!DOCTYPE html>-->
<!--<html>-->

<!--<head>-->
    <!--<meta charset="UTF-8">-->
    <!--<title></title>-->
    <!--<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="/static/css/font-awesome.css"/>-->
    <!--<style type="text/css">-->
        <!--label.error {-->
            <!--font-size: 12px;-->
            <!--color: red;-->
        <!--}-->
    <!--</style>-->
<!--</head>-->

<!--<body>-->
<!--<div class="wrapper wrapper-content ">-->
    <!--<div class="row">-->
        <!--<div class="col-sm-12">-->
            <!--<div class="ibox float-e-margins">-->
                <!--<div class="ibox-content">-->
                    <!--<form class="form-horizontal m-t" id="signupForm">-->
                        <!--<input id="id" name="id" th:value="${people.id}" type="hidden">-->
                        <!--<div class="form-group">-->
                            <!--<label class="col-sm-3 control-label">重置密码：</label>-->
                            <!--<div class="col-sm-8">-->
                            <!--<input id="password" name="pwdNew" class="form-control"-->
                            <!--type="password" value="">-->
                            <!--</div>-->
                            <!--</div>-->
                        <!--<div class="form-group">-->
                            <!--<div class="col-sm-8 col-sm-offset-3">-->
                                <!--<button type="submit" class="btn btn-info">提交</button>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</form>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->
<!--<script type="text/javascript" src="/static/js/jquery.min.js"></script>-->
<!--<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>-->
<!--<script type="text/javascript" src="/static/js/validate/jquery.validate.min.js"></script>-->
<!--<script type="text/javascript" src="/static/js/validate/messages_zh.min.js"></script>-->
<!--<script type="text/javascript">-->
    <!--// $(function () {-->
    <!--//     validatesub();-->
    <!--// })-->
    <!--//提交点击事件-->
    <!--$.validator.setDefaults({-->
        <!--submitHandler: function () {-->
            <!--update();-->
        <!--}-->
    <!--});-->

    <!--//ajax提交-->
    <!--function update() {-->
        <!--$.ajax({-->
            <!--type: "post",-->
            <!--url: "/system/people/adminResetPwd",-->
            <!--async: true,-->
            <!--data: $("#signupForm").serialize(),-->
            <!--datatype: "json",-->
            <!--error : function(request) {-->
                <!--parent.layer.msg("系统错误，联系管理员");-->
            <!--},-->

            <!--success: function(data) {-->
                <!--if (data.code == 0) {-->
                    <!--parent.layer.msg("操作成功");-->
                    <!--parent.reLoad();-->
                    <!--var index = parent.layer.getFrameIndex(window.name); // 获取窗口索引-->
                    <!--parent.layer.close(index);-->

                <!--} else {-->
                    <!--parent.layer.alert(data.msg)-->
                <!--}-->

            <!--}-->
        <!--});-->

    <!--};-->

    <!--// //表单验证-->
    <!--// function validatesub() {-->
    <!--//     var icon = "<i class='fa fa-times-circle'></i> ";-->
    <!--//     $("#signupForm").validate({-->
    <!--//         rules: {-->
    <!--//             password: {-->
    <!--//                 required: true,-->
    <!--//                 rangelength: [3, 10]-->
    <!--//             },-->
    <!--//             pwdNew: {-->
    <!--//                 required: true,-->
    <!--//                 rangelength: [3, 10],-->
    <!--//                 equalTo: "#password"-->
    <!--//             },-->
    <!--//         },-->
    <!--//         messages: {-->
    <!--//             password: {-->
    <!--//                 required: icon + "请输入您的密码",-->
    <!--//                 rangelength: icon + "密码介于3-10位数字"-->
    <!--//             },-->
    <!--//             pwdNew: {-->
    <!--//                 required: icon + "请再次输入密码",-->
    <!--//                 rangelength: icon + "密码介于3-10位数字",-->
    <!--//                 equalTo: icon + "两次密码输入不一致"-->
    <!--//             }-->
    <!--//         }-->
    <!--//     })-->
    <!--// }-->

<!--</script>-->
<!--</body>-->

<!--</html>-->
<!DOCTYPE html>
<html>

<meta charset="utf-8">
<head th:include="include :: header"></head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-sm-12">

            <div class="ibox-content">
                <form class="form-horizontal m-t" id="signupForm">
                    <input id="id" name="id" th:value="${people.id}"
                           type="hidden">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">用户名:</label>
                        <div class="col-sm-8">
                            <input id="username" name="username" class="form-control" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">旧密码：</label>
                        <div class="col-sm-8">
                            <input id="password" name="password" class="form-control" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">请输入新密码：</label>
                        <div class="col-sm-8">
                            <input id="newpassword" name="newpassword" class="form-control" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">请再次输入新密码：</label>
                        <div class="col-sm-8">
                            <input id="newpassword2" name="newpassword2" class="form-control" type="password">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8 col-sm-offset-3">
                            <button type="submit" class="btn btn-primary">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<!-- 全局js -->
<script src="/static/js/jquery.min.js?v=2.1.4"></script>
<script src="/static/js/bootstrap.min.js?v=3.3.6"></script>

<!-- 自定义js -->
<script src="/static/js/content.js?v=1.0.0"></script>

<!-- jQuery Validation plugin javascript-->
<script src="/static/js/plugins/validate/jquery.validate.min.js"></script>
<script src="/static/js/plugins/validate/messages_zh.min.js"></script>


<!-- script src="/js/demo/form-validate-demo.js"></script> -->


<script type="text/javascript">
    $(document).ready(function() {
        validateRule();
        //setCheckedRoles();
    });
    $.validator.setDefaults({
        submitHandler : function() {
            update();
        }
    });
    function update() {
        $.ajax({
            cache : true,
            type : "POST",
            url : "/system/people/adminResetPwd",
            data : $('#signupForm').serialize(),// 你的formid
            async : false,
            error : function(request) {
                parent.layer.msg("系统错误，联系管理员");
            },
            success : function(data) {
                if (data.code == 0) {
                    parent.layer.msg(data.msg);
                    parent.reLoad();
                    var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
                    parent.layer.close(index);

                } else {
                    parent.layer.msg(data.msg);
                }

            }
        });

    }

    function validateRule() {
        var icon = "<i class='fa fa-times-circle'></i> ";
        $("#signupForm").validate({
            rules : {

                password : {
                    required : true,
                    minlength : 6
                }
            },
            messages : {
                password : {
                    required : icon + "请输入您的密码",
                    minlength : icon + "密码必须6个字符以上"
                }
            }
        })
    }
</script>
</body>

</html>
